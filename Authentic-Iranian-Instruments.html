<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Authentic Iranian Instruments</title>

  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="assets/css/overrides.css">

  <style>
    /* ---------- GRID ---------- */
    .about-iran-cards {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 22px;
      width: min(1200px, 94vw);
      margin: 2rem auto;
      justify-items: center;
    }
    .about-iran-card {
      width: 100%;
      aspect-ratio: 1/1;
      background-size: cover;
      background-position: center;
      border-radius: 18px;
      cursor: pointer;
      overflow: hidden;
      box-shadow: 0 8px 18px rgba(0,0,0,0.35);
      transition: transform .3s ease;
      position: relative;
    }
    .about-iran-card:hover { transform: scale(1.05); }
    .about-iran-card span {
      position: absolute;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.55);
      padding: 6px 14px;
      border-radius: 10px;
      color: #fff;
      font-weight: 600;
      font-size: 1rem;
    }

    /* ---------- TOP INTRO ---------- */
    .intro-ir {
      text-align: center;
      max-width: 820px;
      margin: 0 auto;
      color: #d8d8d8;
      line-height: 1.7;
    }
    .back-btn {
      display: inline-block;
      margin-top: 1rem;
      background: #2d3540;
      border: 1px solid #46505f;
      padding: 8px 16px;
      border-radius: 10px;
      color: #b6ffea;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: background .3s ease;
    }
    .back-btn:hover { background: #3c4552; }
    @media (max-width: 900px) {
      .about-iran-cards { grid-template-columns: repeat(2, 1fr); }
    }

    /* ---------- MODAL ---------- */
    .ir-modal__dialog {
      background: #1a1f26;
      border-radius: 20px;
      max-width: 850px;
      margin: 4rem auto;
      padding: 2rem;
      color: #f1f1f1;
      line-height: 1.8;
      position: relative;
    }
    .ir-modal__close {
      background: #333;
      border: none;
      color: #fff;
      font-size: 1.4rem;
      border-radius: 10px;
      cursor: pointer;
      padding: 4px 10px;
    }
    .instrument-title {
      font-size: 1.8rem;
      color: #b6ffea;
      margin-bottom: .4rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .instrument-desc {
      text-align: justify;
      margin-bottom: 1.2rem;
      color: #e2e6ec;
      font-size: 1.05rem;
    }

    /* ---------- SLIDER ---------- */
    .slider-box {
      position: relative;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 6px 18px rgba(0,0,0,0.4);
      text-align: center;
      height: 420px;
      margin-bottom: 1rem;
    }
    .slider-box img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 14px;
      opacity: 0;
      position: absolute;
      top: 0;
      left: 0;
      transition: opacity 1s ease;
    }
    .slider-box img.active { opacity: 1; }
    .slider-nav {
      position: absolute;
      top: 50%;
      width: 100%;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
      padding: 0 15px;
    }
    .slider-nav button {
      background: rgba(0,0,0,0.45);
      border: none;
      color: #fff;
      font-size: 1.6rem;
      width: 42px;
      height: 42px;
      border-radius: 50%;
      cursor: pointer;
      transition: background .3s;
    }
    .slider-nav button:hover { background: rgba(0,0,0,0.65); }

    /* ---------- DOTS ---------- */
    .slider-dots {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      z-index: 5;
    }
    .slider-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255,255,255,0.5);
      cursor: pointer;
      transition: background .3s, transform .3s;
    }
    .slider-dot.active {
      background: #b6ffea;
      transform: scale(1.3);
    }
  </style>
</head>

<body>
  <article id="about-iran" class="about-fixed">
    <h2 class="major">Authentic Iranian Instruments</h2>
    <div class="intro-ir">
      <p>Iranian music, one of the oldest musical traditions in the world, is deeply intertwined with spirituality, poetry, and craftsmanship. Each traditional instrument carries centuries of evolution, design innovation, and symbolic meaning — from the mystic tones of the <em>Ney</em> to the rhythmic power of the <em>Daf</em> and <em>Tombak</em>.</p>
      <a href="Iranian-Music-and-instruments.html" class="back-btn">← Back to Main Menu</a>
    </div>

    <div class="about-iran-cards" id="instrumentGrid"></div>
  </article>

  <!-- MODAL -->
  <div id="instrumentModal" class="ir-modal" aria-hidden="true">
    <div class="ir-modal__backdrop" onclick="closeInstrumentModal()"></div>
    <div class="ir-modal__dialog">
      <button class="ir-modal__close" onclick="closeInstrumentModal()">×</button>
      <div id="instrumentContent"></div>
    </div>
  </div>

  <script>
    /* ---------- INSTRUMENT DATA ---------- */
    const instruments = [
      { key:"tar", name:"Tar", desc:"The Tar, with its double-bowl resonator made of mulberry wood and six strings, is the backbone of Persian classical music. Its shimmering tone defines the <em>Dastgah</em> system. Skilled performers use subtle fingering and dynamic strumming to evoke emotions that mirror Persian poetry.", images:["tar-1.png","tar-2.png"] },
      { key:"setar", name:"Setar", desc:"The Setar is a refined long-necked lute with four metal strings. Traditionally favored by mystics and poets, its name means 'three strings' (originally). Its delicate tone is achieved using the nail of the index finger, ideal for spiritual and meditative performances.", images:["setar-1.png","setar-2.png"] },
      { key:"kamancheh", name:"Kamancheh", desc:"A bowed spike fiddle played vertically with a flexible bow. The Kamancheh produces lyrical, vocal-like tones capable of intricate ornaments and glissandi. It is a bridge between the Persian and Central Asian traditions.", images:["kamancheh-1.png","kamancheh-2.jpg"] },
      { key:"santur", name:"Santur", desc:"The Santur is a trapezoidal hammered dulcimer with over seventy strings struck by lightweight mallets. Its bright crystalline resonance allows rapid trills and arpeggios. It is considered the ancestor of many Asian and European dulcimers.", images:["santur-1.png","santur-2.png"] },
      { key:"dotar", name:"Dotar", desc:"A two-stringed lute used in Khorasan and Turkmen regions. It accompanies epic tales sung by Bakhshi bards. Its fretless neck enables smooth slides across tones, imitating the human voice.", images:["dotar-1.png","dotar-2.png"] },
      { key:"tanbur", name:"Tanbur", desc:"A sacred Kurdish instrument associated with Yarsan rituals. With three strings and a deep, resonant body, the Tanbur represents mystical unity and divine vibration.", images:["tanbur-1.png","tanbur-2.png"] },
      { key:"qanun", name:"Qanun", desc:"A plucked zither with multiple courses of strings and brass levers for fine tuning. The Qanun is capable of precise microtonal modulation essential to Persian modes.", images:["qanun-1.png","qanun-2.png"] },
      { key:"barbat", name:"Barbat", desc:"The Barbat, ancestor of the Oud, has a warm and noble timbre. Its rounded body and short neck make it ideal for intricate melodic improvisations.", images:["barbat-1.png","barbat-2.png"] },
      { key:"rubab", name:"Rubab", desc:"The Rubab, carved from a single block of mulberry wood, is used in eastern Iran and Afghanistan. Its gut strings produce earthy, resonant tones.", images:["rubab-1.png","rubab-2.png"] },
      { key:"tombak", name:"Tombak (Zarb)", desc:"The Tombak is the main Persian goblet drum. It combines percussive power and melodic subtlety, played with fingertips, rolls, snaps, and strokes to create complex rhythmic cycles (<em>Usul</em>).", images:["tombak-1.png","tombak-2.png"] },
      { key:"daf", name:"Daf", desc:"A large frame drum used in Sufi ceremonies. Its circular movement while playing symbolizes the cosmic rotation and connection between human and divine.", images:["daf-1.png","daf-2.png"] },
      { key:"dayereh", name:"Dayereh", desc:"A smaller jingled frame drum with bright rhythms for dance and celebration. It blends folk energy with refined ornamentation.", images:["dayereh-1.png","dayereh-2.png"] },
      { key:"naqareh", name:"Naqareh", desc:"A pair of small kettledrums traditionally played with sticks. Once used in royal courts and war ceremonies, now part of folk festivals.", images:["naqareh-1.png","naqareh-2.png"] },
      { key:"ney", name:"Ney", desc:"The Persian reed flute, among the world’s oldest instruments. Its breathy, soul-stirring tone symbolizes the yearning of the spirit for divine love. Mastery requires precise breath control and embouchure.", images:["ney-1.png","ney-2.png"] },
      { key:"sorna", name:"Sorna", desc:"A powerful double-reed instrument with a bright, joyful tone, commonly used with the Dohol drum in weddings and traditional festivals.", images:["sorna-1.png","sorna-2.png"] },
      { key:"balaban", name:"Balaban (Duduk)", desc:"A cylindrical double-reed flute from Azerbaijan and northwest Iran. Its melancholic tone and breathy warmth make it a staple of lyrical folk songs.", images:["balaban-1.png","balaban-2.png"] },
      { key:"karna", name:"Karna", desc:"A long natural trumpet used in rural festivals and historical ceremonies. Its commanding resonance once announced royal arrivals.", images:["karna-1.png","karna-2.png"] },
      { key:"dozaleh", name:"Dozaleh", desc:"A twin-pipe reed instrument played in Kurdish and Khorasani regions. Each pipe produces separate tones, creating a vibrant harmonic sound.", images:["dozaleh-1.png","dozaleh-2.png"] }
    ];

    /* ---------- CREATE GRID ---------- */
    const grid=document.getElementById("instrumentGrid");
    instruments.forEach(i=>{
      const box=document.createElement("div");
      box.className="about-iran-card";
      box.style.backgroundImage=`url('images/instruments/${i.key}-2.png')`;
      box.innerHTML=`<span>${i.name}</span>`;
      box.onclick=()=>openInstrumentModal(i);
      grid.appendChild(box);
    });

    /* ---------- SLIDER + MODAL ---------- */
    let currentSlide=0, slides=[], dots=[], autoSlideInterval=null;
    function openInstrumentModal(inst){
      const modal=document.getElementById("instrumentModal");
      const c=document.getElementById("instrumentContent");
      c.innerHTML=`
        <h3 class="instrument-title">${inst.name}</h3>
        <p class="instrument-desc">${inst.desc}</p>
        <div class="slider-box">
          ${inst.images.map((src,i)=>`<img src="images/instruments/${src}" class="${i===0?'active':''}">`).join('')}
          <div class="slider-nav">
            <button onclick="slide(-1)">&#10094;</button>
            <button onclick="slide(1)">&#10095;</button>
          </div>
          <div class="slider-dots">
            ${inst.images.map((_,i)=>`<div class="slider-dot ${i===0?'active':''}" onclick="goToSlide(${i})"></div>`).join('')}
          </div>
        </div>
      `;
      modal.setAttribute("aria-hidden","false");
      currentSlide=0;
      slides=[...c.querySelectorAll('.slider-box img')];
      dots=[...c.querySelectorAll('.slider-dot')];
      startAutoSlide();
    }

    function slide(dir){
      if(!slides.length)return;
      updateSlide((currentSlide+dir+slides.length)%slides.length);
    }
    function goToSlide(i){
      if(!slides.length)return;
      updateSlide(i);
    }
    function updateSlide(i){
      slides[currentSlide].classList.remove('active');
      dots[currentSlide].classList.remove('active');
      currentSlide=i;
      slides[currentSlide].classList.add('active');
      dots[currentSlide].classList.add('active');
    }

    function startAutoSlide(){
      stopAutoSlide();
      autoSlideInterval=setInterval(()=>slide(1),5000);
    }
    function stopAutoSlide(){
      if(autoSlideInterval)clearInterval(autoSlideInterval);
    }
    function closeInstrumentModal(){
      stopAutoSlide();
      document.getElementById("instrumentModal").setAttribute("aria-hidden","true");
    }
  </script>

</body>
</html>

